# 第一章 开端：语法与基础

## 0·总结

## 1·造一个简单计算器：数值(number)的四则运算(运算符)

&emsp;没有了计算功能，计算机就会失去灵魂。我们不难想象，大型程序是由一个个计算语句组成。所以，我们探索 CovScript 的第一步将从简单的四则运算开始。
&emsp;运行以下代码，它作用是：将a的值打印到屏幕。

```java{class=line-numbers}
using system
var a = 16
out.print(a)
```

&emsp;在解读这段代码前，我们先了解一些知识：

```java
var a = 16
```

**var** 是variable（变量）的缩写，var 关键字表示声明变量，变量的类型由 = 后的内容决定。
变量在所有编程语言中都占有举足轻重的地位，几乎所有数据在编程语言中都需要由变量来保存。我们可以将变量理解为“杯子”，而内容（数据）被“装”在杯子里。
CovScript 对这段代码的执行流程是：
> 我们声明了变量 a ，并向变量 a 中“装入”了一个 16 的数据，CovScript 自动将 16 识别为数值类型。至此，我们得到了一个数值类变量 a，目前它的值为 16。

```java
out.print(a)
```

而在之前的 hello word 演示代码中，我们知道 out.print() 是可以向屏幕打印内容的。只是这里打印的是变量的内容，而变量是不需要加双引号的。

<br></br>
&emsp;细心的读者可能会发现：之所以说目前 a 的值为 16，是因为变量还可以进行更改。
&emsp;现在，我们尝试用赋值语句来修改 a 的值。向之前的代码添加一句：

```java{class=line-numbers}
using system
var a = 16
a = a + 4
out.print(a)
```

&emsp;显而易见，代码的运行结果为 20。
&emsp;我们再聊聊赋值语句：

```java
a = a + 4
```

对于此处的加法，此处理解为数学意义上的加法。
几乎所有编程语言的**赋值语句**都设计得大同小异：我们以人类阅读从左至右的习惯，读出这行话为“a 等于 a 加 4”。不难猜出，赋值语句是要让程序将 a 的值变为 a + 4。
进一步解释，赋值语句是要将 = 右侧内容，写入 = 左侧内容，从而改变左侧变量的值。
CovScript 对这段代码的执行流程是：

> CovScript 先计算 = 右侧的值，再将a的值修改为右侧计算出的值

**值得注意的是**：这里的 4 可不是变量。4 就是常理中认为的 4，好比一升水就是一升水，我们并没有说这是“某瓶里的一升水”。因此这里的“水”可以没有“瓶子”，也就不是变量——但“不是瓶子里的水”并不会影响“装瓶”，不是变量的 4 也不会影响计算加法与赋值。
<br></br>
&emsp;有了 var 关键字和赋值语句，我们可以完成最简单的加法计算器了！虽然它只能计算固定数值（以下是计算 16 + 3 的和）

```java{class=line-numbers}
using system
var a = 16, b = 3
var c = a + b
out.print(c)
```

如果想要输入的功能，只需要加上 **in.input()** 的语句。此代码会从键盘读入两个数，输出它们的和。这样，加法计算器就完成了！同理你可以完成减法，乘除法的计算器。

```java{class=line-numbers}
using system
var a = new number, b = new number, c = new number
a = in.input(); b = in.input();
c = a + b
out.print(c)
```

new number 意为：当前并不想为此变量赋值（因为之后需要输入），但又不得不指明该变量是何种类型。此时可以使用 new 关键字指明该变量类型为 number。试想，在此声明的变量只是较为简单的 number，可以使用 var a = 123 等来表示 a 的类型，所幸 123 的内容并不多。如若是更为复杂的类型，使用 new 关键字来表示声明变量的类型，将会带来很大的方便。
in.input()会将从键盘读入的内容返回给 CovScript，你只需要用赋值语句将输入的内容“送”给你的变量。
**值得注意的是**：第 3 行代码中，每句句尾添加了引号“;”，它的作用和中文中的句号类似，表示一句话的结束。这是因为 CovScript 会默认将一行代码识别为一条语句，非要将两条语句写在一行，你需要手动为它们标记语句的结束。

&emsp;聪明的读者会发现两个细节：第 2 行的连续声明，和第 3 行的声明。也许会因此将赋值和变量声明联想在一起——它们的确有关系，但现在并不适合阐述，你只要会用就行了。你仍可以在wiki上发现关于变量初始化的细节，和赋值的定义。

## 2·计算器进一步优化：判断(if, ?:)和字符串(string)

&emsp;让我们再仔细想想，如果仅用上一节提及的知识制作除法计算器的不完美之处：它在运算除法时并不会检测除数是否为 0，但合格的计算器需要这个功能。
&emsp;本节我们来为除法计算器添加此功能。
```java{class=line-numbers}
using system
var a = new number, b = new number, c = new number
a = in.input(); b = in.input();
if b==0
    out.print("error: can not divide 0.")
    exit(0)
else
    c = a / b
    out.print(c)
end
```
我们使用 **if else end** 三个关键字来实现判断功能。
它的格式很简单：if 与其后的判断条件使用空格隔开。如果条件表达式为真，则执行 if 后的语句块；反之执行 else 后的语句块，并以 end 作为整个条件判断的结尾。
第 6 行的 **exit(0)** 表示执行到此时，结束整个程序。

&emsp;如果要把除法功能做的更严谨，我们知道除以 0 时是可以产生无穷大的。进一步，我们默认 0 / 0 中，除数与被除数同阶，那么 0 / 0 将为 1 。
&emsp;实现这种做法，需要使用嵌套的循环，以达到分类讨论的效果。
```java{class=line-numbers}
using system
var a = new number, b = new number, c = new number
a = in.input(); b = in.input();
if b == 0
    if a > 0
        c = "+inf"
    end
    if a  == 0
        c = 1
    end
    if a < 0
        c = "-inf"
    end
else
    c = a / b
end
out.print(c)
```

像如上的结构，称之为 if 的嵌套结构。你可以在任何位置嵌套使用 if。
第 4 行中的 == 符号意为判断两个值是否相等（因为 = 号意为赋值，故设计语言时采用 == 号）。
也许有读者对第 6 行有所疑问：为什么一个 number 类型的变量，却能等于一个字符串呢？这是因为 CovScript 是动态强类型语言，变量的类型在初次声明之后是可以被更改的。

&emsp;对于上面的代码，我们还能简化

```java{class=line-numbers}
using system
var a = new number, b = new number, c = new number
a = in.input(); b = in.input();
if b == 0
    if a  == 0
        c = 1
    else
        c = a>0 ? "+inf" : "-inf"
    end
else
    c = a / b
end
out.print(c)
```
解释代码前，我们先介绍一中功能和 if 类似的语句：**三目表达式**。
三目表达式的形式为 **条件表达式 : 表达式1 ? 表达式2**，它的值取决于条件表达式。条件表达式为真，则三目表达式的值为 表达式1，否则为 表达式2。
让我们看看以上代码的逻辑：

>在 b 为 0 的情况下，如果 a 为 0，则 c = 1，如果 a 不为 0，则为 c 根据情况进行赋值：当 a > 0 时，c 为 "+inf"，否则为 "-inf"。

涉及到以条件取值时，可以使用三目表达式，这样可以极大地简化代码量。

## 3·增加数列计算、科学计算等功能：循环(for, while, loop)与常量(constant)



## 4·功能整合——完善你的多功能计算器：分支(switch)

## 5·矩阵计算器——解放线性代数作业：数组(array)

## 6·来数钱！超市收银台：综合运用
